{
    "sourceFile": "main.py",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1768832942271,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1768995367760,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -35,13 +35,13 @@\n \r\n start_time = time.time()\r\n \r\n # Esempio di utilizzo\r\n-date = '2026-01-20'\r\n+date = '2026-01-18'\r\n data = get_matches_per_day.get_matches_data(date)\r\n if data:\r\n     #print_matches(data)\r\n-    db_module.save_matches_to_db(data['events']) \r\n+    db_module.save_matches_to_db(data) \r\n     # Ottieni e salva i grafici per ciascuna partita usando un singolo driver\r\n     options = webdriver.ChromeOptions()\r\n     options.add_argument('--headless')\r\n     options.add_argument('--disable-gpu')\r\n"
                },
                {
                    "date": 1769072471113,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,77 @@\n+import json\r\n+import re\r\n+import time\r\n+\r\n+import get_matches_per_day\r\n+import db_module\r\n+from selenium import webdriver\r\n+\r\n+def print_matches(page_json):\r\n+    # Estrazione e stampa dei dati delle partite\r\n+    for event in page_json['events']:\r\n+        home_team = event['homeTeam']['name']\r\n+        away_team = event['awayTeam']['name']\r\n+        status = event['status']['description']\r\n+        tournament = event['tournament']['name']\r\n+        \r\n+        home_score = event.get('homeScore', {}).get('current', 'N/A')\r\n+        away_score = event.get('awayScore', {}).get('current', 'N/A')\r\n+        \r\n+        # Dati aggiuntivi\r\n+        start_timestamp = event.get('startTimestamp', 'N/A')\r\n+        home_country = event['homeTeam']['country']['name']\r\n+        away_country = event['awayTeam']['country']['name']\r\n+        season = event['season']['name']\r\n+        event_id = event['id']\r\n+        \r\n+        print(f\"Torneo: {tournament}\")\r\n+        print(f\"Stagione: {season}\")\r\n+        print(f\"{home_team} ({home_country}) {home_score} - {away_score} {away_team} ({away_country})\")\r\n+        print(f\"Status: {status}\")\r\n+        print(f\"ID Evento: {event_id}\")\r\n+        print(f\"Timestamp Inizio: {start_timestamp}\")\r\n+        print(\"-\" * 50)\r\n+\r\n+\r\n+start_time = time.time()\r\n+\r\n+# Esempio di utilizzo\r\n+date = '2026-01-18'\r\n+data = get_matches_per_day.get_matches_data(date)\r\n+if data:\r\n+    #print_matches(data)\r\n+    db_module.save_matches_to_db(data) \r\n+    # Ottieni e salva i grafici per ciascuna partita usando un singolo driver\r\n+    options = webdriver.ChromeOptions()\r\n+    options.add_argument('--headless')\r\n+    options.add_argument('--disable-gpu')\r\n+    options.add_argument('--no-sandbox')\r\n+    options.add_argument('--disable-dev-shm-usage')\r\n+    driver = webdriver.Chrome(options=options)\r\n+    driver.set_page_load_timeout(10)  # Timeout di 10 secondi per il caricamento della pagina\r\n+    for i, event in enumerate(data['events']):\r\n+        #if i >= 5:  # Limita a 5 match per test\r\n+        #    break\r\n+        match_id = event['id']\r\n+        print(f\"Processando match {match_id} ({i+1}/{len(data['events'])})\")\r\n+        graphics = get_matches_per_day.get_graphics_per_match(match_id, driver)\r\n+        if graphics:\r\n+            db_module.save_graphics_to_db(match_id, graphics)\r\n+        else:\r\n+            print(f\"Nessun grafico trovato per match {match_id}\")\r\n+        \r\n+        # Ottieni e salva le statistiche\r\n+        statistics = get_matches_per_day.get_statistics_per_match(match_id, driver)\r\n+        if statistics:\r\n+            db_module.save_statistics_to_db(match_id, statistics)\r\n+        else:\r\n+            print(f\"Nessuna statistica trovata per match {match_id}\")\r\n+    driver.quit()\r\n+    \r\n+    # Popola la tabella statistics_column dopo aver inserito tutti i JSON\r\n+    db_module.populate_statistics_column_db()\r\n+else:\r\n+    print(\"JSON non trovato nella pagina.\")\r\n+\r\n+end_time = time.time()\r\n+print(f\"Tempo di esecuzione: {end_time - start_time} secondi\")\n\\ No newline at end of file\n"
                }
            ],
            "date": 1768832942271,
            "name": "Commit-0",
            "content": "import json\r\nimport re\r\nimport time\r\n\r\nimport get_matches_per_day\r\nimport db_module\r\nfrom selenium import webdriver\r\n\r\ndef print_matches(page_json):\r\n    # Estrazione e stampa dei dati delle partite\r\n    for event in page_json['events']:\r\n        home_team = event['homeTeam']['name']\r\n        away_team = event['awayTeam']['name']\r\n        status = event['status']['description']\r\n        tournament = event['tournament']['name']\r\n        \r\n        home_score = event.get('homeScore', {}).get('current', 'N/A')\r\n        away_score = event.get('awayScore', {}).get('current', 'N/A')\r\n        \r\n        # Dati aggiuntivi\r\n        start_timestamp = event.get('startTimestamp', 'N/A')\r\n        home_country = event['homeTeam']['country']['name']\r\n        away_country = event['awayTeam']['country']['name']\r\n        season = event['season']['name']\r\n        event_id = event['id']\r\n        \r\n        print(f\"Torneo: {tournament}\")\r\n        print(f\"Stagione: {season}\")\r\n        print(f\"{home_team} ({home_country}) {home_score} - {away_score} {away_team} ({away_country})\")\r\n        print(f\"Status: {status}\")\r\n        print(f\"ID Evento: {event_id}\")\r\n        print(f\"Timestamp Inizio: {start_timestamp}\")\r\n        print(\"-\" * 50)\r\n\r\n\r\nstart_time = time.time()\r\n\r\n# Esempio di utilizzo\r\ndate = '2026-01-20'\r\ndata = get_matches_per_day.get_matches_data(date)\r\nif data:\r\n    #print_matches(data)\r\n    db_module.save_matches_to_db(data['events']) \r\n    # Ottieni e salva i grafici per ciascuna partita usando un singolo driver\r\n    options = webdriver.ChromeOptions()\r\n    options.add_argument('--headless')\r\n    options.add_argument('--disable-gpu')\r\n    options.add_argument('--no-sandbox')\r\n    options.add_argument('--disable-dev-shm-usage')\r\n    driver = webdriver.Chrome(options=options)\r\n    driver.set_page_load_timeout(10)  # Timeout di 10 secondi per il caricamento della pagina\r\n    for i, event in enumerate(data['events']):\r\n        #if i >= 5:  # Limita a 5 match per test\r\n        #    break\r\n        match_id = event['id']\r\n        print(f\"Processando match {match_id} ({i+1}/{len(data['events'])})\")\r\n        graphics = get_matches_per_day.get_graphics_per_match(match_id, driver)\r\n        if graphics:\r\n            db_module.save_graphics_to_db(match_id, graphics)\r\n        else:\r\n            print(f\"Nessun grafico trovato per match {match_id}\")\r\n        \r\n        # Ottieni e salva le statistiche\r\n        statistics = get_matches_per_day.get_statistics_per_match(match_id, driver)\r\n        if statistics:\r\n            db_module.save_statistics_to_db(match_id, statistics)\r\n        else:\r\n            print(f\"Nessuna statistica trovata per match {match_id}\")\r\n    driver.quit()\r\n    \r\n    # Popola la tabella statistics_column dopo aver inserito tutti i JSON\r\n    db_module.populate_statistics_column_db()\r\nelse:\r\n    print(\"JSON non trovato nella pagina.\")\r\n\r\nend_time = time.time()\r\nprint(f\"Tempo di esecuzione: {end_time - start_time} secondi\")"
        }
    ]
}